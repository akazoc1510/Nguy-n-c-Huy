#include <REGX52.H>	   // khai bao thu vien
sbit DATA=P3^2;
sbit STR=P3^1;
sbit SCK=P3^0;

void delay(int a)  // ham delay
{
int c,b;
for(c=0;c<a;c++)
	{
		for(b=0;b<125;b++)
			{}
	}
}   

unsigned char code cot[]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};		// khai bao giu lieu tren cot
unsigned char code hang[]={		0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,	 // khai bao du lieu tren hang 
								0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
								0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
								0xc0,0x80,0x7F,0xBF,0xDF,0xBF,0x7F,0x80, //w
							    0xFF,0x81,0x00,0x76,0x76,0x7E,0xFF,0xFF, //e
							    0xFF,0x80,0x00,0x7F,0x7F,0x7F,0xFF,0xFF, //l
							    0xFF,0xC3,0x81,0x7E,0x7E,0x7E,0xBD,0xFF, //c
							    0xFF,0xC3,0x81,0x7E,0x7E,0x7E,0x81,0xC3, //o
							    0xFF,0x00,0x01,0xFB,0xF7,0xFB,0x01,0x00, //m
							    0xFF,0x81,0x00,0x76,0x76,0x7E,0xFF,0xFF, //e
								0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
								0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
								0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
							};



void input(unsigned char x)		// ham vao du lieu cho ic 74hc595
{
	unsigned char temp, i;
	for(i=0;i<8;i++)
	{
		temp=x&0x80;
		if(temp==0x80)
			DATA=1;
		else DATA=0;
		x=x*2;
		SCK=0;
		SCK=1;
	}
}
 
void main()			
{
int i,j,k;
while(1)
	{
		for(i=0;i<50;i++)
			{
				for(j=0;j<20;j++)
					{
						for(k=0;k<8;k++)
							{
							input(hang[i+k+24]);
							input(hang[i+k+16]);
							input(hang[i+k+8]);
							input(hang[i+k]);
							STR=0;
							STR=1;
							P2=cot[k];
							delay(5);
							P2=0x00;
							}
					}
			}
	}
} 